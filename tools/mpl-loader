"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const frontend_1 = require("./frontend");
const js_1 = require("./backends/js");
function default_1(source) {
    const frontendOutput = frontend_1.compile(source);
    if ('parseErrors' in frontendOutput ||
        'typeErrors' in frontendOutput ||
        'kind' in frontendOutput ||
        'internalError' in frontendOutput) {
        this.emitError(frontendOutput);
        return;
    }
    const js = js_1.default.compile(frontendOutput);
    if ('error' in js) {
        this.emitError(js.error);
        return;
    }
    return js.target;
}
exports.default = default_1;
